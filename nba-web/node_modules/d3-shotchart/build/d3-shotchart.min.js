!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){function t(t){t.each(function(t){if(d3.select(this).style("max-width",e/16+"em"),d3.select(this).selectAll("svg").empty()){var a=d3.select(this).append("svg").attr("viewBox","0, 0, 50, 47").classed("court",!0);a.append("g").classed("court-paint",!0).append("rect").attr("width",16).attr("height",19).attr("x",25).attr("transform","translate(-8,0)").attr("y",r(19)),a.append("g").classed("inner-court-paint",!0).append("line").attr("x1",19).attr("x2",19).attr("y1",r(19)).attr("y2",r(0)),a.append("g").classed("inner-court-paint",!0).append("line").attr("x1",31).attr("x2",31).attr("y1",r(19)).attr("y2",r(0));var n=a.append("g").classed("foul-circle dashed",!0);n.append("defs").append("clipPath").attr("id","cut-off-top").append("rect").attr("width",12).attr("height",6).attr("x",25).attr("y",r(19)).attr("transform","translate(-6,0)"),n.append("circle").attr("cx",25).attr("cy",r(19)).attr("r",6).attr("stroke-dasharray","1,1").attr("clip-path","url(#cut-off-top)");var d=a.append("g").classed("foul-circle solid",!0);d.append("defs").append("clipPath").attr("id","cut-off-bottom").append("rect").attr("width",12).attr("height",6).attr("x",25).attr("y",r(19)).attr("transform","translate(-6,-6)"),d.append("circle").attr("cx",25).attr("cy",r(19)).attr("r",6).attr("clip-path","url(#cut-off-bottom)"),a.append("g").classed("backboard",!0).append("line").attr("x1",22).attr("x2",28).attr("y1",r(4)).attr("y2",r(4)),a.append("g").classed("rim",!0).append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",.75);var i=a.append("g").classed("restricted-area",!0);i.append("defs").append("clipPath").attr("id","restricted-cut-off").append("rect").attr("width",8).attr("height",4).attr("x",25).attr("y",r(4.75)).attr("transform","translate(-4,-4)"),i.append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",4).attr("clip-path","url(#restricted-cut-off)"),i.append("line").attr("x1",21).attr("x2",21).attr("y1",r(5.25)).attr("y2",r(4)),i.append("line").attr("x1",29).attr("x2",29).attr("y1",r(5.25)).attr("y2",r(4));var s=a.append("g").classed("three-point-area",!0);s.append("defs").append("clipPath").attr("id","three-point-cut-off").append("rect").attr("width",44).attr("height",23.75).attr("x",25).attr("y",r(4.75)).attr("transform","translate(-22,-23.75)"),s.append("circle").attr("cx",25).attr("cy",r(4.75)).attr("r",23.75).attr("clip-path","url(#three-point-cut-off)"),s.append("line").attr("x1",3).attr("x2",3).attr("y1",r(14)).attr("y2",r(0)),s.append("line").attr("x1",47).attr("x2",47).attr("y1",r(14)).attr("y2",r(0));var c=a.append("g").classed("key-lines",!0);c.append("line").attr("x1",16).attr("x2",17).attr("y1",r(7)).attr("y2",r(7)),c.append("line").attr("x1",16).attr("x2",17).attr("y1",r(8)).attr("y2",r(8)),c.append("line").attr("x1",16).attr("x2",17).attr("y1",r(11)).attr("y2",r(11)),c.append("line").attr("x1",16).attr("x2",17).attr("y1",r(14)).attr("y2",r(14)),c.append("line").attr("x1",33).attr("x2",34).attr("y1",r(7)).attr("y2",r(7)),c.append("line").attr("x1",33).attr("x2",34).attr("y1",r(8)).attr("y2",r(8)),c.append("line").attr("x1",33).attr("x2",34).attr("y1",r(11)).attr("y2",r(11)),c.append("line").attr("x1",33).attr("x2",34).attr("y1",r(14)).attr("y2",r(14)),a.append("g").classed("court-baseline",!0).append("line").attr("x1",0).attr("x2",50).attr("y1",r(0)).attr("y2",r(0)),a.append("g").classed("shots",!0)}else var a=d3.select(this).selectAll("svg")})}var e=500,a=.94*e;return t.width=function(r){return arguments.length?(e=r,a=.94*r,t):e},t}function a(){function t(t){t.each(function(t){var h=d3.select(this).select("svg").select(".shots"),f=d3.select(this).select("#legends"),x=p(t),y=o(x).map(u);if("scatter"===n){f.empty()===!1&&f.remove();var g=h.selectAll(".shot").data(t,function(t){return[t.x,t.y]});if(g.exit().transition().duration(1e3).attr("r",0).attr("d",o.hexagon(0)).remove(),l){var m=d3.tip().attr("class","d3-tip").offset([-8,0]).html(function(t){return t.shot_distance+"' "+t.action_type});h.call(m)}g.enter().append("circle").classed("shot",!0).classed("make",function(t){return 1===t.shot_made_flag}).classed("miss",function(t){return 0===t.shot_made_flag}).attr("cx",function(t){return t.x}).attr("cy",function(t){return i(t.y)}).attr("r",0).on("mouseover",function(t){l&&m.show(t)}).on("mouseout",function(t){l&&m.hide(t)}).transition().duration(1e3).attr("r",.5)}else if("hexbin"===n){var g=h.selectAll(".shot").data(y,function(t){return[t.x,t.y]});if(g.exit().transition().duration(1e3).attr("r",0).attr("d",o.hexagon(0)).remove(),l){var m=d3.tip().attr("class","d3-tip").offset([-8,0]).html(function(t){return t.makes+" / "+t.attempts+" ("+s(t.shootingPercentage)+")"});h.call(m)}if(g.enter().append("path").classed("shot",!0).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).attr("d",o.hexagon(0)).on("mouseover",function(t){l&&m.show(t)}).on("mouseout",function(t){l&&m.hide(t)}).transition().duration(1e3).attr("d",function(t){if(t.length>=a)return t.length<=3?o.hexagon(c(0)):3<t.length&&t.length<=8?o.hexagon(c(1)):o.hexagon(c(2))}).style("fill",function(t){return r(t.shootingPercentage)}),f.empty()===!0){var v=d3.select(this).append("svg").attr("viewBox","0, 0, 50, 10").attr("id","legends"),w=v.append("g").classed("legend",!0),k=v.append("g").classed("legend",!0).classed("frequency",!0),_=7;w.append("text").classed("legend-text",!0).attr("x",40).attr("y",5).attr("text-anchor","middle").text("Efficiency"),w.append("text").classed("legend-text",!0).attr("x",34.25).attr("y",2.5).attr("text-anchor","end").text("cold"),w.append("text").classed("legend-text",!0).attr("x",45.75).attr("y",2.5).attr("text-anchor","start").text("hot"),w.selectAll("path").data(r.range()).enter().append("path").attr("transform",function(t,e){return"translate("+(35+1*(1+2*e))+", 2)"}).attr("d",o.hexagon(0)).transition().duration(1e3).attr("d",o.hexagon(1)).style("fill",function(t){return t}),w.selectAll("text").style("fill",function(){return"night"===d?"white":"day"===d?"black":void 0}),k.append("text").classed("legend-text",!0).attr("x",10.25).attr("y",5).attr("text-anchor","middle").text("Frequency"),k.append("text").classed("legend-text",!0).attr("x",6.25).attr("y",2.5).attr("text-anchor","end").text("low"),k.selectAll("path").data(e).enter().append("path").attr("transform",function(t,e){return _+=2*t,"translate("+(_-t)+", 2)"}).attr("d",o.hexagon(0)).transition().duration(1e3).attr("d",function(t){return o.hexagon(t)}),k.append("text").classed("legend-text",!0).attr("x",13.75).attr("y",2.5).attr("text-anchor","start").text("high"),k.selectAll("text").style("fill",function(){return"night"===d?"white":"day"===d?"black":void 0}),k.selectAll("path").style("fill",function(){return"night"===d?"none":"day"===d?"grey":void 0})}}})}var e=[.8,1,1.2],a=1,r=d3.scaleQuantize().domain([0,1]).range(["#5458A2","#6689BB","#FADC97","#F08460","#B02B48"]),c=d3.scaleQuantize().domain([0,2]).range(e),l=!1,o=d3_hexbin.hexbin().radius(1.2).x(function(t){return t.key[0]}).y(function(t){return i(t.key[1])}),p=function(t){var e=d3.nest().key(function(t){return[t.x,t.y]}).rollup(function(t){return{made:d3.sum(t,function(t){return t.shot_made_flag}),attempts:t.length,shootingPercentage:d3.sum(t,function(t){return t.shot_made_flag})/t.length}}).entries(t);return e.forEach(function(t){t.key=JSON.parse("["+t.key+"]")}),e},u=function(t,e){var a=d3.sum(t,function(t){return t.value.attempts}),r=d3.sum(t,function(t){return t.value.made}),n=r/a;return t.shootingPercentage=n,t.attempts=a,t.makes=r,t};return t.displayType=function(e){return arguments.length?(n=e,t):n},t.shotRenderThreshold=function(e){return arguments.length?(a=e,t):a},t.displayToolTips=function(e){return arguments.length?(l=e,t):l},t.theme=function(e){return arguments.length?(d=e,t):d},t}var r=d3.scaleLinear().domain([0,47]).rangeRound([47,0]),n="scatter",d="day",i=d3.scaleLinear().domain([0,47]).rangeRound([47,0]),s=d3.format(".2%");t.court=e,t.shots=a,Object.defineProperty(t,"__esModule",{value:!0})});